var gulp=require("gulp"),compass=require("gulp-for-compass"),rsync=require("gulp-rsync"),open=require("gulp-open"),shell=require("gulp-shell"),sass=require("gulp-sass"),sourcemaps=require("gulp-sourcemaps"),autoprefixer=require("gulp-autoprefixer"),runSequence=require("run-sequence"),importer=require("node-sass-globbing"),plumber=require("gulp-plumber"),cssmin=require("gulp-cssmin"),sass_config={importer:importer,includePaths:["node_modules/compass-mixins/lib/"]};gulp.task("sass",function(){gulp.src("./scss/**/*.scss").pipe(plumber()).pipe(sourcemaps.init()).pipe(sass(sass_config).on("error",sass.logError)).pipe(autoprefixer({browsers:["last 2 version"]})).pipe(sourcemaps.write(".")).pipe(gulp.dest("./css"))}),gulp.task("sass:watch",function(){gulp.watch("./scss/**/*.scss",["build"])}),gulp.task("default",["build","sass:watch"]),gulp.task("build",function(s){runSequence("compass","upload",function(){console.log("Run something else"),s()})}),gulp.task("compass",function(){gulp.src("scss/**/*.scss").pipe(compass({sassDir:"scss",httpPath:"/",cssDir:"css",outputStyle:"compressed",imagesDir:"images",javascriptsDir:"js",fontsDir:"fonts",relativeAssets:!0,force:!0}))}),gulp.task("upload",shell.task(["rsync -v -r /Users/nlue/sites/working_nysm/css /Volumes/APP/websites_drupal/nysm-dev/nysm/","rsync -v -r /Users/nlue/sites/working_nysm/layouts /Volumes/APP/websites_drupal/nysm-dev/nysm/","rsync -v -r /Users/nlue/sites/working_nysm/images /Volumes/APP/websites_drupal/nysm-dev/nysm/","rsync -v -r /Users/nlue/sites/working_nysm/templates /Volumes/APP/websites_drupal/nysm-dev/nysm/","rsync -v -r /Users/nlue/sites/working_nysm/js /Volumes/APP/websites_drupal/nysm-dev/nysm/","rsync -v -r /Users/nlue/sites/working_nysm/templates /Volumes/APP/websites_drupal/nysm-dev/nysm/"]));